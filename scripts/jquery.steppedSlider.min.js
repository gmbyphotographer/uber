
(function($){var SteppedSlider,_defaultOptions;_defaultOptions={range:false,trueValues:[],callback:$.noop};function _buildOptions(options){var defaults=$.extend(true,{},_defaultOptions),opts=$.extend(defaults,options);opts.step=1;opts.min=0;opts.max=(opts.trueValues.length-1);if(!opts.range&&!opts.value){opts.value=opts.min;}else if(opts.range&&!opts.values){opts.values=[opts.min,opts.max];}
return opts;}
function _findNearest(givenValue,trueValues){return trueValues[givenValue];}
SteppedSlider=function(node,options){this.$node=$(node);this.options=_buildOptions(options);this.init();};SteppedSlider.prototype.init=function(){var opts=this.options,fakeCBOpts={};opts.slide=$.proxy(this.slide,this);this.slider=this.$node.slider(opts);if(opts.values){fakeCBOpts.values=opts.values;}else{fakeCBOpts.value=opts.value;}
this.slide(null,fakeCBOpts);};SteppedSlider.prototype.slide=function(event,ui){var trueValues=this.options.trueValues,callbackObject,val,valLeft,valRight;callbackObject={position:ui.value,ui:ui,event:event};if(this.options.range){valLeft=_findNearest(ui.values[0],trueValues);valRight=_findNearest(ui.values[1],trueValues);callbackObject.values={left:valLeft,right:valRight};}else{val=_findNearest(ui.value,trueValues);callbackObject.value=val;}
this.options.callback(callbackObject);};$.fn.steppedSlider=function(opts){return this.each(function(){var $this=$(this),steppedSlider;if($this.data("steppedSlider")){return;}
steppedSlider=new SteppedSlider(this,opts);$this.data("steppedSlider",steppedSlider);});};})(jQuery);
